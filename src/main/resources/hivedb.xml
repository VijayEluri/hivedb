<beans>
	<!-- start a JMX Server -->
	<bean id="mbeanServer"
		class="org.springframework.jmx.support.MBeanServerFactoryBean" />

	<!--  Use an RMI registry to expose our MBeans remotely through a JSR160 JMXConnectorServer -->
	<bean id="rmiRegistry"
		class="org.springframework.remoting.rmi.RmiRegistryFactoryBean" />

	<bean id="serverConnector"
		class="org.springframework.jmx.support.ConnectorServerFactoryBean"
		depends-on="rmiRegistry">
		<property name="objectName" value="connector:name=rmi" />
		<property name="serviceUrl"
			value="service:jmx:rmi://localhost/jndi/rmi://localhost:1099/myconnector" />
	</bean>

	<bean id="exporter"
		class="org.springframework.jmx.export.MBeanExporter">
		<property name="beans">
			<map>
				<entry key="Server:name=HttpAdaptor">
					<bean class="mx4j.tools.adaptor.http.HttpAdaptor">
						<property name="port" value="8000" />
						<property name="host" value="0.0.0.0" />
						<property name="processor">
							<bean
								class="mx4j.tools.adaptor.http.XSLTProcessor" />
						</property>
					</bean>
				</entry>
			</map>
		</property>
		<property name="listeners">
			<list>
				<!-- let the HttpAdapter be started after it is registered in the MBeanServer -->
				<bean class="HttpAdaptorMgr">
					<property name="mbeanServer" ref="mbeanServer" />
				</bean>
			</list>
		</property>
	</bean>
</beans>